webpackJsonp([1],{"/yRs":function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var s,a=(s=n("8ebl")).default||s,r={render:function(){var t=this.$createElement,e=this._self._c||t;return e("div",{staticClass:"vue-street-view-pano-container"},[e("div",{ref:"vue-street-view-pano",staticClass:"vue-street-view-pano"}),this._v(" "),this._t("default")],2)},staticRenderFns:[]};var i=n("VU/8")(a,r,!1,function(t){n("CjMs")},null,null);e.default=i.exports},"5ZbH":function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var s,a=(s=n("hOwk")).default||s,r={render:function(){var t=this.$createElement,e=this._self._c||t;return e("div",{staticClass:"vue-map-container"},[e("div",{ref:"vue-map",staticClass:"vue-map"}),this._v(" "),e("div",{staticClass:"vue-map-hidden"},[this._t("default")],2),this._v(" "),this._t("visible")],2)},staticRenderFns:[]};var i=n("VU/8")(a,r,!1,function(t){n("dtWn")},null,null);e.default=i.exports},"5cLx":function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var s,a=(s=n("WgA/")).default||s,r={render:function(){var t=this.$createElement,e=this._self._c||t;return e("div",[e("div",{ref:"flyaway"},[this._t("default")],2)])},staticRenderFns:[]},i=n("VU/8")(a,r,!1,null,null,null);e.default=i.exports},"6dm/":function(t,e){},"8dOu":function(t,e){},"97rr":function(t,e){},CjMs:function(t,e){},Jmt5:function(t,e){},"KaI/":function(t,e){},NHnr:function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var s=n("7+uW"),a={render:function(){var t=this.$createElement,e=this._self._c||t;return e("div",{attrs:{id:"app"}},[e("router-view")],1)},staticRenderFns:[]};var r=n("VU/8")({name:"App"},a,!1,function(t){n("8dOu")},null,null).exports,i=n("/ocq"),o=n("JPH7"),c=n.n(o),l={name:"Header",components:{Icon:c.a},data:function(){return{menuActive:!1}},methods:{logout:function(){this.$auth.logout()},toggleMobileMenu:function(){this.menuActive=!this.menuActive}}},u={render:function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{staticClass:"header-fixed"},[n("nav",{staticClass:"navbar navbar-expand-sm navbar-light bg-faded"},[n("button",{staticClass:"navbar-toggler",attrs:{type:"button"},on:{click:function(e){t.toggleMobileMenu()}}},[n("span",{staticClass:"navbar-toggler-icon"})]),n("router-link",{staticClass:"navbar-brand",attrs:{to:{name:"Start"}}},[t._v("WhatEvening")]),n("div",{staticClass:"navbar-collapse",class:{collapse:!t.menuActive},attrs:{id:"nav-content"}},[n("ul",{staticClass:"navbar-nav ml-auto"},[n("li",{staticClass:"nav-item"},[n("router-link",{attrs:{to:{name:"NewEvent"}}},[n("icon",{attrs:{name:"plus"}}),t._v("добавить событие")],1)],1),n("li",{staticClass:"nav-item ml-3"},[n("router-link",{attrs:{to:{name:"Events"}}},[n("icon",{attrs:{name:"map-marker-alt"}}),t._v("перейти к событиям")],1)],1),t.$store.user?n("li",{staticClass:"nav-item nav-item__user"},[n("router-link",{staticClass:"nav-item__name",attrs:{to:{name:"UserDetail"}}},[n("icon",{attrs:{name:"user"}}),t._v(t._s(t.$store.user.name))],1),n("button",{staticClass:"nav-item__name",on:{click:function(e){t.logout()}}},[n("icon",{attrs:{name:"sign-out-alt"}})],1)],1):n("li",{staticClass:"nav-item ml-3"},[n("router-link",{attrs:{to:{name:"SignIn"}}},[t._v("Войти")]),n("span",{staticClass:"pl-1 pr-1"},[t._v("|")]),n("router-link",{attrs:{to:{name:"SignUp"}}},[t._v("Зарегитрироваться")])],1)])])],1)])},staticRenderFns:[]};var d=n("VU/8")(l,u,!1,function(t){n("mY/U")},null,null).exports,p={name:"StartPage",components:{headerFixed:d}},m={render:function(){var t=this.$createElement,e=this._self._c||t;return e("div",{staticClass:"wrapper overlay h-100"},[e("div",{staticClass:"absolute anlge-bg"}),e("headerFixed"),this._m(0)],1)},staticRenderFns:[function(){var t=this.$createElement,e=this._self._c||t;return e("div",{staticClass:"container d-flex header__title"},[e("div",{staticClass:"row ustify-content-center align-self-center"},[e("div",{staticClass:"col-md-8 text-left align-middle"},[e("h1",[this._v("WhatEvening")]),e("p",[this._v("Lorem ipsum dolor sit amet, consectetur adipisicing elit. Libero ex inventore vel error quibusdam animi fugiat, doloribus dolores consectetur nulla deleniti sint blanditiis quod debitis quis vitae officiis tempora numquam.")])])])])}]};var v=n("VU/8")(p,m,!1,function(t){n("Rl4b")},null,null).exports,f=n("Xxa5"),h=n.n(f),_=n("exGp"),g=n.n(_),b=n("Dd8w"),C=n.n(b),x=n("mtWM"),w=n.n(x),y=function(){return w.a.create({baseURL:"http://localhost:8081"})},k=function(){return y().get("events")},E=function(t){return y().post("events",t)},$=function(t){return y().get("events/"+t.id)},U=function(t){return y().put("events/"+t.id,t)},P=function(t){return y().delete("events/"+t)},F=n("NYxO"),S={name:"BeatLoader",props:{loading:{type:Boolean,default:!0},color:{type:String,default:"#5dc596"},size:{type:String,default:"15px"},margin:{type:String,default:"2px"},radius:{type:String,default:"100%"}},data:function(){return{spinnerStyle:{backgroundColor:this.color,height:this.size,width:this.size,margin:this.margin,borderRadius:this.radius}}}},M={render:function(){var t=this.$createElement,e=this._self._c||t;return e("div",{directives:[{name:"show",rawName:"v-show",value:this.loading,expression:"loading"}],staticClass:"v-spinner"},[e("div",{staticClass:"v-beat v-beat-odd",style:this.spinnerStyle}),e("div",{staticClass:"v-beat v-beat-even",style:this.spinnerStyle}),e("div",{staticClass:"v-beat v-beat-odd",style:this.spinnerStyle})])},staticRenderFns:[]};var O=n("VU/8")(S,M,!1,function(t){n("fd1K")},null,null).exports,R=n("sA6N");s.a.use(R,{load:{key:"AIzaSyBQtG5rd9o_lFFtgjCARNlWetWfDXSbL6Y",libraries:"places, drawing"}});var A={props:["gmapAutocomplete","styleMap","getAllEvents"],data:function(){return{center:"",markers:[],places:[],currentPlace:null,currentMidx:null,zoom:10,infoContent:"",infoWindowPos:null,infoWinOpen:!1,infoOptions:{pixelOffset:{width:0,height:-35}},loading:!0}},components:{BeatLoader:O},methods:{setPlace:function(t){this.currentPlace=t},addMarker:function(t){if(t.preventDefault(),this.currentPlace){var e={lat:this.currentPlace.geometry.location.lat(),lng:this.currentPlace.geometry.location.lng()};this.markers.push({position:e}),this.places.push(this.currentPlace),this.center=e,this.currentPlace=null,this.$emit("setCoords",{coords:e}),this.zoom=16}},geolocate:function(){var t=this;navigator.geolocation.getCurrentPosition(function(e){t.marker=t.center={lat:e.coords.latitude,lng:e.coords.longitude},t.loading=!t.loading})},toggleInfoWindow:function(t,e){this.infoWindowPos=t.coords,this.infoContent=t.title+": "+t.description,this.currentMidx===e?this.infoWinOpen=!this.infoWinOpen:(this.infoWinOpen=!0,this.currentMidx=e)}},mounted:function(){this.geolocate()}},j={render:function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{staticClass:"gmap-container"},[t.gmapAutocomplete?n("div",{staticClass:"gmap-autocomplete__container d-flex mb-3"},[n("gmap-autocomplete",{staticClass:"form-control",on:{place_changed:t.setPlace}}),n("button",{staticClass:"btn btn-success ml-2",on:{click:t.addMarker}},[t._v("Добавить")])],1):t._e(),n("beat-loader",{attrs:{loading:t.loading}}),t.loading?t._e():n("GmapMap",{ref:"map",style:t.styleMap,attrs:{center:t.center,zoom:t.zoom,"map-type-id":"roadmap"}},[t._l(t.markers,function(e,s){return t.gmapAutocomplete?n("GmapMarker",{key:s,attrs:{position:e.position},on:{click:function(n){t.center=e.position}}}):t._e()}),t._l(this.getAllEvents,function(e,s){return t.gmapAutocomplete?t._e():n("GmapMarker",{key:s,attrs:{clickable:!0,position:e.coords},on:{click:function(n){t.toggleInfoWindow(e,s)}}})}),n("gmap-info-window",{attrs:{options:t.infoOptions,position:t.infoWindowPos,opened:t.infoWinOpen},on:{closeclick:function(e){t.infoWinOpen=!1}}},[t._v(t._s(t.infoContent))])],2)],1)},staticRenderFns:[]};var D=n("VU/8")(A,j,!1,function(t){n("6dm/")},null,null).exports,V={name:"EventsPage",data:function(){return{loading:!0}},components:{headerFixed:d,BeatLoader:O,Gmap:D,Icon:c.a},methods:C()({removeEvent:function(t){var e=this;return g()(h.a.mark(function n(){return h.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,P(t);case 2:case"end":return e.stop()}},n,e)}))()}},Object(F.b)("events",{getEvents:"getEvents",setCurrentEvent:"setCurrentEvent"})),computed:C()({},Object(F.d)({events:function(t){return t.events.items}})),created:function(){var t=this;this.getEvents().then(function(){t.loading=!1})}},W={render:function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{staticClass:"wrapper"},[n("headerFixed"),n("div",{staticClass:"events"},[n("div",{staticClass:"events__container"},[n("beat-loader",{attrs:{loading:t.loading}}),t.events&&!t.loading?n("section",{staticClass:"panel panel-success"},t._l(t.events,function(e,s){return n("div",{key:e.title,staticClass:"event p-1 pr-3 text-left",on:{click:function(n){t.setCurrentEvent(e)}}},[n("p",{staticClass:"event__title"},[t._v(t._s(e.title))]),n("p",{staticClass:"event__description"},[t._v(t._s(e.description))]),!0===e.user.id?n("div",{staticClass:"event__nav text-right"},[n("router-link",{staticClass:"btn btn-secondary btn-sm event__edit",attrs:{to:{name:"EditEvent",params:{id:e._id}}}},[n("icon",{attrs:{name:"edit"}})],1),n("button",{staticClass:"btn btn-danger btn-sm event__remove",attrs:{type:"button"},on:{click:function(n){t.removeEvent(e._id)}}},[n("icon",{attrs:{name:"times"}})],1)],1):t._e()])})):t._e(),"0"==t.events.length?n("section",{staticClass:"panel panel-danger"},[n("p",[t._v("На данный момент нет мероприятий... Создайте своё")]),n("div",[n("router-link",{attrs:{to:{name:"NewEvent"}}},[t._v("Добавить мероприятие")])],1)]):t._e()],1),n("div",{staticClass:"events__map"},[n("Gmap",{attrs:{styleMap:"width:100%; height: 100%;",getAllEvents:t.events}})],1)])],1)},staticRenderFns:[]};var I=n("VU/8")(V,W,!1,function(t){n("KaI/")},null,null).exports,N={render:function(){var t=this.$createElement;return(this._self._c||t)("div",{staticClass:"alert alert-danger p-1 pl-2 text-left"},[this._t("default")],2)},staticRenderFns:[]},q=n("VU/8")({name:"Error"},N,!1,null,null,null).exports,L={name:"NewEventPage",data:function(){return{event:{title:"",description:"",adress:"",coords:""},error:""}},components:{headerFixed:d,Gmap:D,error:q},methods:{addEvent:function(){var t=this;return g()(h.a.mark(function e(){return h.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(""===t.event.title||""===t.event.description||!t.event.coords){e.next=7;break}return t.error="",e.next=4,E({title:t.event.title,description:t.event.description,coords:{lat:t.event.coords.lat,lng:t.event.coords.lng},user:{id:t.$auth.user.sub}});case 4:t.$router.push({name:"Events"}),e.next=8;break;case 7:t.error="Заполните все поля!";case 8:case"end":return e.stop()}},e,t)}))()},onCoords:function(t){this.event.coords=t.coords},goBack:function(){this.$router.push({name:"Events"})}}},G={render:function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{staticClass:"wrapper"},[n("headerFixed"),n("div",{staticClass:"container"},[n("div",{staticClass:"row justify-content-center"},[n("div",{staticClass:"col-md-6"},[n("h1",[t._v("Создать мероприятие")]),n("form",[n("div",{staticClass:"form-group"},[n("input",{directives:[{name:"model",rawName:"v-model.trim",value:t.event.title,expression:"event.title",modifiers:{trim:!0}}],staticClass:"form-control",attrs:{type:"text",name:"title",id:"title",placeholder:"Название мероприятия"},domProps:{value:t.event.title},on:{input:function(e){e.target.composing||t.$set(t.event,"title",e.target.value.trim())},blur:function(e){t.$forceUpdate()}}})]),n("div",{staticClass:"form-group"},[n("textarea",{directives:[{name:"model",rawName:"v-model.trim",value:t.event.description,expression:"event.description",modifiers:{trim:!0}}],staticClass:"form-control",attrs:{type:"text",rows:"5",name:"description",id:"description",placeholder:"Описание"},domProps:{value:t.event.description},on:{input:function(e){e.target.composing||t.$set(t.event,"description",e.target.value.trim())},blur:function(e){t.$forceUpdate()}}})]),n("div",{staticClass:"form-group"},[n("Gmap",{attrs:{gmapAutocomplete:"gmapAutocomplete",styleMap:"width:100%; height: 300px;"},on:{setCoords:t.onCoords}})],1),t.error?n("div",{staticClass:"form-group"},[n("error",[t._v(t._s(t.error))])],1):t._e(),n("div",{staticClass:"form-group"},[n("button",{staticClass:"btn btn-block btn-primary",attrs:{type:"button",name:"addEvent",id:"addEvent"},on:{click:function(e){t.addEvent()}}},[t._v("создать мероприятние")])]),n("div",{staticClass:"form-group"},[n("button",{staticClass:"btn btn-success btn-block",attrs:{type:"button"},on:{click:function(e){t.goBack()}}},[t._v("посмотреть все мероприятия")])])])])])])],1)},staticRenderFns:[]},B=n("VU/8")(L,G,!1,null,null,null).exports,z={name:"EditEventPage",components:{headerFixed:d},data:function(){return{event:{title:"",description:""}}},methods:{getEvent:function(){var t=this;return g()(h.a.mark(function e(){var n;return h.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,$({id:t.$route.params.id});case 2:n=e.sent,t.event.title=n.data.title,t.event.description=n.data.description;case 5:case"end":return e.stop()}},e,t)}))()},editEvent:function(){var t=this;return g()(h.a.mark(function e(){return h.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(""===t.event.title||""===t.event.description){e.next=4;break}return e.next=3,U({id:t.$route.params.id,title:t.event.title,description:t.event.description});case 3:t.$router.push({name:"Events"});case 4:case"end":return e.stop()}},e,t)}))()}},mounted:function(){this.getEvent()}},T={render:function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{staticClass:"wrapper"},[n("headerFixed"),n("div",{staticClass:"container"},[n("div",{staticClass:"row justify-content-center"},[n("div",{staticClass:"col-md-4"},[n("h1",[t._v("редактировать событие")]),n("form",{on:{submit:function(e){e.preventDefault(),t.editEvent()}}},[n("div",{staticClass:"form-group"},[n("input",{directives:[{name:"model",rawName:"v-model.trim",value:t.event.title,expression:"event.title",modifiers:{trim:!0}}],staticClass:"form-control",attrs:{type:"text",name:"title",id:"title",placeholder:"Title"},domProps:{value:t.event.title},on:{input:function(e){e.target.composing||t.$set(t.event,"title",e.target.value.trim())},blur:function(e){t.$forceUpdate()}}})]),n("div",{staticClass:"form-group"},[n("input",{directives:[{name:"model",rawName:"v-model.trim",value:t.event.description,expression:"event.description",modifiers:{trim:!0}}],staticClass:"form-control",attrs:{type:"text",name:"description",id:"description",placeholder:"Description"},domProps:{value:t.event.description},on:{input:function(e){e.target.composing||t.$set(t.event,"description",e.target.value.trim())},blur:function(e){t.$forceUpdate()}}})]),t._m(0),n("div",{staticClass:"form-group"},[n("router-link",{staticClass:"btn btn-danger btn-block",attrs:{to:{name:"Events"}}},[t._v("вернуться к списку событий")])],1)])])])])],1)},staticRenderFns:[function(){var t=this.$createElement,e=this._self._c||t;return e("div",{staticClass:"form-group"},[e("button",{staticClass:"btn btn-success btn-block",attrs:{type:"submit",name:"editEvent"}},[this._v("сохранить")])])}]},H=n("VU/8")(z,T,!1,null,null,null).exports,K={name:"UserDetail",data:function(){return{condition:1,error:""}},components:{headerFixed:d},computed:C()({},Object(F.d)({user:function(t){return t.user.data}}),Object(F.c)({metadata:"user/getMetadata"})),created:function(){var t=this.$auth.user;this.$store.dispatch("user/getUserData",t)}},Y={render:function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{staticClass:"wrapper"},[n("headerFixed"),n("div",{staticClass:"user container mt-3"},[n("div",{staticClass:"row"},[n("div",{staticClass:"col-md-2"},[n("div",{staticClass:"user__logo mb-3"},[n("img",{staticClass:"user__img",attrs:{src:t.user.picture}})])]),n("div",{staticClass:"col-md-10 text-left"},[n("div",{staticClass:"user__tabs btn-group mb-3",attrs:{role:"group"}},[n("button",{staticClass:"btn btn-secondary user__btn",class:{active:1===t.condition},attrs:{type:"button"},on:{click:function(e){t.condition=1}}},[t._v("Персональные данные")]),n("button",{staticClass:"btn btn-secondary user__btn",class:{active:2===t.condition},attrs:{type:"button"},on:{click:function(e){t.condition=2}}},[t._v("Созданные мероприятия")]),n("button",{staticClass:"btn btn-secondary user__btn",class:{active:3===t.condition},attrs:{type:"button"},on:{click:function(e){t.condition=3}}},[t._v("Архив заявок")])]),1===t.condition?n("div",{staticClass:"user__tab"},[n("h2",{staticClass:"user__name"},[t._v(t._s(t.user.name))]),t.metadata?n("div",t._b({staticClass:"user-info"},"div",t.metadata,!1),[n("div",{staticClass:"user-info__wrap"},[n("span",{staticClass:"user-info__label"},[t._v("Никнейм")]),n("p",{staticClass:"iser-info__text"},[t._v(t._s(t.user.nickname))])]),t.metadata.city?n("div",{staticClass:"user-info__wrap"},[n("span",{staticClass:"user-info__label"},[t._v("Город")]),n("p",{staticClass:"iser-info__text"},[t._v(t._s(t.metadata.city))])]):t._e(),t.metadata.adress?n("div",{staticClass:"user-info__wrap"},[n("span",{staticClass:"user-info__label"},[t._v("Адрес")]),n("p",{staticClass:"iser-info__text"},[t._v(t._s(t.metadata.adress))])]):t._e()]):t._e(),n("router-link",{staticClass:"btn btn-outline-info btn-sm",attrs:{to:{name:"UserUpdate"}}},[t._v("редактировать профиль")])],1):t._e(),2==t.condition?n("div",{staticClass:"user__tab"},[n("h2",[t._v("События")]),n("p",[t._v("Тут будут события, которые создал пользователь"),n("b",{staticClass:"pl-1"},[t._v(t._s(t.user.nickname))])])]):t._e(),3==t.condition?n("div",{staticClass:"user__tab"},[n("h2",[t._v("Архив заявок")])]):t._e()])])])],1)},staticRenderFns:[]};var J=n("VU/8")(K,Y,!1,function(t){n("97rr")},null,null).exports,Z=function(t){return y().post("register",t)},Q=function(t){return y().post("login",t)},X=function(){return y().get("logout")},tt=function(){return y().get("person")},et=function(){return y().get("user/")},nt=function(t){return y().post("/user",t)},st={name:"UserUpdate",data:function(){return{condition:1,error:""}},components:{headerFixed:d},methods:{getToken:function(){var t=this;return g()(h.a.mark(function e(){return h.a.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,et();case 2:case"end":return t.stop()}},e,t)}))()},updateProfile:function(){var t=this;return g()(h.a.mark(function e(){return h.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,nt({city:t.$store.state.user.metadata.city,adress:t.$store.state.user.metadata.adress,userId:t.$store.state.user.data.sub}).then(function(e){t.$router.push({name:"UserDetail"})});case 2:case"end":return e.stop()}},e,t)}))()},updateCityStore:function(t){this.$store.commit("user/updateCity",t.target.value)},updateAdressStore:function(t){this.$store.commit("user/updateAdress",t.target.value)}},computed:C()({},Object(F.d)({metadata:function(t){return t.user.metadata}})),created:function(){this.getToken()}},at={render:function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{staticClass:"wrapper"},[n("headerFixed"),n("div",{staticClass:"container"},[n("div",{staticClass:"row justify-content-center"},[n("div",{staticClass:"col-md-6"},[n("h1",[t._v("Редактировать пользовательские данные")]),n("form",{staticClass:"text-left"},[n("div",{staticClass:"form-group"},[n("label",{staticClass:"label",attrs:{for:"city"}},[t._v("Город")]),n("input",{staticClass:"form-control",attrs:{type:"text",name:"city",id:"city",placeholder:"Город"},domProps:{value:this.metadata.city},on:{input:t.updateCityStore}})]),n("div",{staticClass:"form-group"},[n("label",{staticClass:"label",attrs:{for:"adress"}},[t._v("Адрес")]),n("input",{staticClass:"form-control",attrs:{type:"text",name:"adress",id:"adress",placeholder:"Адрес"},domProps:{value:this.metadata.adress},on:{input:t.updateAdressStore}})]),n("div",{staticClass:"form-group"},[n("button",{staticClass:"btn btn-success btn-block",attrs:{type:"button",name:"updateUserProfile",id:"updateUserProfile"},on:{click:function(e){t.updateProfile()}}},[t._v("Сохранить изменения")])]),n("div",{staticClass:"form-group"},[n("router-link",{staticClass:"btn btn-outline-danger btn-block",attrs:{to:{name:"UserDetail"}}},[t._v("Вернуться без сохранения")])],1)])])])])],1)},staticRenderFns:[]},rt=n("VU/8")(st,at,!1,null,null,null).exports,it={props:{id:String,name:{type:String,required:!0},type:{type:String,required:!0},placeholder:{type:String,required:!0}}},ot={render:function(){var t=this.$createElement;return(this._self._c||t)("input",{staticClass:"form-control",attrs:{id:this.id,name:this.name,type:this.type,placeholder:this.placeholder}})},staticRenderFns:[]},ct=n("VU/8")(it,ot,!1,null,null,null).exports,lt={name:"SignUpPage",components:{inputComponent:ct},data:function(){return{user:{email:"",password:""}}},methods:{signUp:function(){var t=this;return g()(h.a.mark(function e(){return h.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(""===t.user.email||""===t.user.password){e.next=3;break}return e.next=3,Z({email:t.user.email,password:t.user.password}).then(function(e){console.log(e),e.data.success&&t.$router.push({name:"Start"})});case 3:case"end":return e.stop()}},e,t)}))()}}},ut={render:function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{staticClass:"wrapper"},[n("div",{staticClass:"container"},[n("div",{staticClass:"row justify-content-center"},[n("div",{staticClass:"col-md-4"},[n("h1",[t._v("Регистрация нового пользователя")]),n("form",{on:{submit:function(e){e.preventDefault(),t.signUp()}}},[n("div",{staticClass:"form-group"},[n("inputComponent",{attrs:{type:"text",name:"name",placeholder:"name"},model:{value:t.user.name,callback:function(e){t.$set(t.user,"name","string"==typeof e?e.trim():e)},expression:"user.name"}})],1),n("div",{staticClass:"form-group"},[n("inputComponent",{attrs:{type:"email",name:"email",placeholder:"email",required:"required"},model:{value:t.user.email,callback:function(e){t.$set(t.user,"email","string"==typeof e?e.trim():e)},expression:"user.email"}})],1),n("div",{staticClass:"form-group"},[n("inputComponent",{attrs:{type:"password",name:"password",placeholder:"password",required:"required"},model:{value:t.user.password,callback:function(e){t.$set(t.user,"password","string"==typeof e?e.trim():e)},expression:"user.password"}})],1),t._m(0),n("div",{staticClass:"form-group"},[n("button",{staticClass:"btn btn-success btn-block",attrs:{type:"button"},on:{click:function(t){this.$router.push({name:"Start"})}}},[t._v("вернуться на главную")])])])])])])])},staticRenderFns:[function(){var t=this.$createElement,e=this._self._c||t;return e("div",{staticClass:"form-group"},[e("button",{staticClass:"btn btn-success btn-block",attrs:{type:"submit",name:"signUp"}},[this._v("сохранить")])])}]},dt=n("VU/8")(lt,ut,!1,null,null,null).exports,pt={name:"SingInPage",components:{inputComponent:ct,error:q},data:function(){return{user:{email:"",password:""},error:!1}},methods:C()({signIn:function(){var t=this;return g()(h.a.mark(function e(){return h.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(""===t.user.email||""===t.user.password){e.next=5;break}return e.next=3,t.$auth.login({email:t.user.email,password:t.user.password}).then(function(e){console.log(e.data),e.data.auth?(t.getUserData(),t.$router.push({name:"Events"})):t.error=e.data.message});case 3:e.next=6;break;case 5:t.error="Заполните все поля!";case 6:case"end":return e.stop()}},e,t)}))()}},Object(F.b)("user",{getUserData:"getUserData"}))},mt={render:function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{staticClass:"wrapper"},[n("div",{staticClass:"container"},[n("div",{staticClass:"row justify-content-center"},[n("div",{staticClass:"col-md-4"},[n("h1",[t._v("Войти")]),n("form",{on:{submit:function(e){e.preventDefault(),t.signIn()}}},[n("div",{staticClass:"form-group"},[n("input",{directives:[{name:"model",rawName:"v-model.trim",value:t.user.email,expression:"user.email",modifiers:{trim:!0}}],staticClass:"form-control",attrs:{name:"email",type:"email",placeholder:"email"},domProps:{value:t.user.email},on:{input:function(e){e.target.composing||t.$set(t.user,"email",e.target.value.trim())},blur:function(e){t.$forceUpdate()}}})]),n("div",{staticClass:"form-group"},[n("input",{directives:[{name:"model",rawName:"v-model.trim",value:t.user.password,expression:"user.password",modifiers:{trim:!0}}],staticClass:"form-control",attrs:{name:"password",type:"password",placeholder:"password"},domProps:{value:t.user.password},on:{input:function(e){e.target.composing||t.$set(t.user,"password",e.target.value.trim())},blur:function(e){t.$forceUpdate()}}})]),t.error?n("div",{staticClass:"form-group"},[n("error",[t._v(t._s(t.error))])],1):t._e(),t._m(0),n("div",{staticClass:"form-group"},[n("button",{staticClass:"btn btn-outline-danger btn-block",attrs:{type:"button"},on:{click:function(t){this.$router.push({name:"Start"})}}},[t._v("Вернуться на главную")])])])])])])])},staticRenderFns:[function(){var t=this.$createElement,e=this._self._c||t;return e("div",{staticClass:"form-group"},[e("button",{staticClass:"btn btn-success btn-block",attrs:{type:"submit",name:"signIn"}},[this._v("Войти")])])}]},vt=n("VU/8")(pt,mt,!1,null,null,null).exports,ft={name:"callback",components:{BeatLoader:O},mounted:function(){}},ht={render:function(){var t=this.$createElement,e=this._self._c||t;return e("div",{staticClass:"callback d-flex justify-content-center align-items-center"},[e("BeatLoader")],1)},staticRenderFns:[]};var _t=n("VU/8")(ft,ht,!1,function(t){n("coIO")},null,null).exports;s.a.use(i.a);var gt=new i.a({mode:"history",routes:[{path:"/",name:"Start",component:v},{path:"/events",name:"Events",component:I},{path:"/events/new",name:"NewEvent",component:B},{path:"/events/:id",name:"EditEvent",component:H},{path:"/callback",name:"Callback",component:_t},{path:"/userDetail",name:"UserDetail",component:J},{path:"/userUpdate",name:"UserUpdate",component:rt},{path:"/signup",name:"SignUp",component:dt},{path:"/signin",name:"SignIn",component:vt}]});gt.beforeEach(function(t,e,n){"UserDetail"!==t.name&&"Events"!==t.name&&"NewEvent"!==t.name&&"EditEvent"!==t.name?n():(gt.app.$auth.isAuthenticated(),n())});var bt=gt,Ct=(n("Jmt5"),{namespaced:!0,state:{items:[],currentEvent:[]},getters:{},mutations:{setEvents:function(t,e){t.items=e},setCurrentEvent:function(t,e){t.currentEvent=e}},actions:{getEvents:function(t){var e=this,n=t.commit;return g()(h.a.mark(function t(){var s,a;return h.a.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,k();case 2:s=t.sent,a=s.data.events,n("setEvents",a);case 5:case"end":return t.stop()}},t,e)}))()},setCurrentEvent:function(t,e){(0,t.commit)("setCurrentEvent",e)}}}),xt={namespaced:!0,state:{data:[],metadata:{city:"",adress:""}},getters:{getMetadata:function(t){return t.data["http://localhost:8080/user_metadata"]},isAuth:function(t){return t.data}},mutations:{setUserData:function(t,e){t.user=e},setMetadata:function(t,e){t.metadata=e}},actions:{getUserData:function(t){var e=this,n=t.commit;return g()(h.a.mark(function t(){var s,a;return h.a.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,tt();case 2:s=t.sent,a=s.data,n("setUserData",a);case 5:case"end":return t.stop()}},t,e)}))()},setMetadata:function(t,e){(0,t.commit)("setMetadata",e)}}};s.a.use(F.a);var wt=new F.a.Store({modules:{events:Ct,user:xt},state:{},getters:{},actions:{},mutations:{}}),yt=new s.a({methods:{login:function(t){var e=t.email,n=t.password;return Q({email:e,password:n})},logout:function(){X()},isAuthenticated:function(){return this.$cookie.get("token")}}}),kt={install:function(t){t.prototype.$auth=yt}},Et=n("K/Lq"),$t=n.n(Et);s.a.use($t.a),s.a.use(kt),s.a.config.productionTip=!1,new s.a({router:bt,store:wt,render:function(t){return t(r)}}).$mount("#app")},Rl4b:function(t,e){},T5eZ:function(t,e,n){"use strict";var s={render:function(){var t=this.$createElement,e=this._self._c||t;return e("label",[e("span",{domProps:{textContent:this._s(this.label)}}),this._v(" "),e("input",{ref:"input",class:this.className,attrs:{type:"text",placeholder:this.placeholder}})])},staticRenderFns:[]};e.a=s},YI6p:function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var s=n("jIen"),a=n.n(s);for(var r in s)"default"!==r&&function(t){n.d(e,t,function(){return s[t]})}(r);var i=n("T5eZ"),o=n("VU/8")(a.a,i.a,!1,null,null,null);e.default=o.exports},coIO:function(t,e){},dtWn:function(t,e){},fd1K:function(t,e){},"mY/U":function(t,e){},preG:function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var s,a=(s=n("hQTS")).default||s,r={render:function(){var t=this.$createElement;return(this._self._c||t)("input",{ref:"input",attrs:{type:"text",placeholder:this.placeholder},domProps:{value:this.value}})},staticRenderFns:[]},i=n("VU/8")(a,r,!1,null,null,null);e.default=i.exports}},["NHnr"]);
//# sourceMappingURL=app.18ab438d81e8ca43af86.js.map